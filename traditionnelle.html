<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Album - Traditionnelle</title>

  <style>
    :root{
      --bg: #000;
      --text: #fff;
      --glass: rgba(255,255,255,.10);
      --glass2: rgba(255,255,255,.14);
      --stroke: rgba(255,255,255,.18);
      --stroke2: rgba(255,255,255,.26);
      --shadow: 0 20px 60px rgba(0,0,0,.55);
      --radius: 18px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin: 0;
      padding: 18px;
      background: radial-gradient(1200px 900px at 20% 10%, rgba(255,255,255,.08), transparent 60%),
                  radial-gradient(900px 700px at 90% 30%, rgba(255,255,255,.06), transparent 60%),
                  #000;
      color: var(--text);
      font-family: -apple-system, system-ui, Segoe UI, Roboto, sans-serif;
      overflow-x: hidden;
    }

    /* ====== Bulles (fond) ====== */
    .bubbles{
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }
    .bubbles::before,
    .bubbles::after{
      content: "";
      position: absolute;
      width: 520px;
      height: 520px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.16), rgba(255,255,255,.02) 60%, transparent 70%);
      filter: blur(2px);
      opacity: .9;
      animation: floaty 10s ease-in-out infinite;
      border: 1px solid rgba(255,255,255,.10);
    }
    .bubbles::before{ left: -160px; top: 80px; }
    .bubbles::after { right: -200px; top: 320px; animation-duration: 13s; opacity: .75; }

    @keyframes floaty{
      0%,100% { transform: translate(0,0) scale(1); }
      50%     { transform: translate(20px,-18px) scale(1.03); }
    }

    /* ====== Container ====== */
    .wrap{
      position: relative;
      z-index: 1;
      max-width: 1200px;
      margin: 0 auto;
      padding-bottom: 30px;
    }

    /* ====== Header ====== */
    .header-album{
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin: 10px 0 22px;
      padding: 12px 12px;
      border-radius: 22px;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border: 1px solid rgba(255,255,255,.14);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }

    .title{
      display: flex;
      align-items: baseline;
      gap: 10px;
      padding-right: 6px;
      min-width: 0;
    }
    .title h1{
      margin: 0;
      font-size: 18px;
      letter-spacing: .2px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .title .badge{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.9);
      white-space: nowrap;
    }

    .btn-back{
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 10px 14px;
      border-radius: 999px;
      text-decoration: none;
      color: #fff;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.18);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      transition: transform .2s ease, background .2s ease, border-color .2s ease;
      user-select: none;
      font-weight: 600;
    }
    .btn-back:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.14);
      border-color: rgba(255,255,255,.28);
    }

    /* ====== Grid ====== */
    .album-grid{
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 14px;
      margin-top: 14px;
    }

    .card{
      position: relative;
      border-radius: var(--radius);
      overflow: hidden;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 10px 35px rgba(0,0,0,.45);
      transition: transform .18s ease, border-color .18s ease;
      cursor: pointer;
    }
    .card:hover{
      transform: translateY(-2px);
      border-color: rgba(255,255,255,.22);
    }

    .card img{
      width: 100%;
      height: 100%;
      display: block;
      aspect-ratio: 4/5;
      object-fit: cover;
      transform: scale(1.02);
      transition: transform .25s ease;
    }
    .card:hover img{ transform: scale(1.05); }

    /* ====== Lightbox (Plein écran + plus grand) ====== */
    .lightbox{
      display: none;
      position: fixed;
      inset: 0;
      z-index: 2000;
      background: rgba(0,0,0,.92);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      align-items: center;
      justify-content: center;
      cursor: pointer;
      padding: max(12px, env(safe-area-inset-top)) 12px max(16px, env(safe-area-inset-bottom));
    }

    .lightbox.active{ display: flex; }

    .lightbox-inner{
      position: relative;
      width: min(98vw, 1400px);
      height: min(94vh, 920px);
      display: grid;
      place-items: center;
      border-radius: 22px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: var(--shadow);
      overflow: hidden;
      cursor: default;
      overflow-y: auto;             /* ✅ scroll vertical */
      -webkit-overflow-scrolling: touch; /* ✅ scroll fluide sur iPhone/Android */
      padding: 64px 14px 18px;      /* espace pour la barre du haut */
      touch-action: pan-y; /* permet le swipe vertical */

    }

    /* Image réellement plus grande qu’avant */
    .lightbox-content{
      max-width: 90%;
      max-height: 99%;
      border-radius: 16px;
      box-shadow: 0 0 40px rgba(0,0,0,.55);
      transform: scale(.96);
      transition: transform .18s ease;
      cursor: pointer;
      user-select: none;
      -webkit-user-drag: none;
      touch-action: manipulation;
    }

    /* Quand on zoome (via JS) */
    .lightbox-content.zoomed{
      cursor: move;
    }

    /* Top actions */
    .lightbox-top{
      position: absolute;
      top: 10px;
      left: 10px;
      right: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      pointer-events: none;
      
    }

    .pill{
      pointer-events: auto;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.18);
      color: rgba(255,255,255,.92);
      font-size: 12px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      user-select: none;
    }

    .close-lightbox{
      pointer-events: auto;
      width: 44px;
      height: 44px;
      border-radius: 999px;
      display: grid;
      place-items: center;
      font-size: 22px;
      font-weight: 900;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.18);
      color: #fff;
      cursor: pointer;
      transition: transform .18s ease, background .18s ease, border-color .18s ease;
    }
    .close-lightbox:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.14);
      border-color: rgba(255,255,255,.28);
    }

    /* Mobile adjustments */
    @media (max-width: 480px){
      body{ padding: 14px; }
      .title h1{ font-size: 16px; }
      .title .badge{ display: none; }
      .album-grid{ grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 12px; }
    }
  </style>
</head>

<body>
  <div class="bubbles"></div>

  <div class="wrap">
    <div class="header-album">
      <a href="index.html" class="btn-back" aria-label="Retour">
        <span>←</span> Retour
      </a>

      <div class="title">
        <h1>Album Traditionnelle</h1>
        <span class="badge">Photos</span>
      </div>
    </div>

    <div class="album-grid" id="grid">
      <div class="card"><img alt="Photo 1" src="https://i.postimg.cc/j2b1R1vT/IMG_1680.jpg"></div>
      <div class="card"><img alt="Photo 2" src="https://i.postimg.cc/vTsKGKXG/IMG_1681.jpg"></div>
      <div class="card"><img alt="Photo 3" src="https://i.postimg.cc/L5pWmWvH/IMG_1682.jpg"></div>
      <div class="card"><img alt="Photo 4" src="https://i.postimg.cc/Bb0zJzNf/IMG_1683.jpg"></div>
      <div class="card"><img alt="Photo 5" src="https://i.postimg.cc/cCSzdzTN/IMG_1684.jpg"></div>
      <div class="card"><img alt="Photo 6" src="https://i.postimg.cc/5yVrfrpV/IMG_1685.jpg"></div>
    </div>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" aria-hidden="true">
    <div class="lightbox-inner" role="dialog" aria-label="Aperçu photo">
      <div class="lightbox-top">
        
        <button class="close-lightbox" id="closeBtn" aria-label="Fermer">×</button>
      </div>

      <img class="lightbox-content" id="img-full" alt="Image agrandie" />
    </div>
  </div>

  <script>
   

   
  const lightbox = document.getElementById("lightbox");
  const lightboxInner = lightbox.querySelector(".lightbox-inner");
  const lightboxImg = document.getElementById("img-full");
  const closeBtn = document.getElementById("closeBtn");
  const cards = document.querySelectorAll(".album-grid img");

  function openLightbox(src, alt) {
    lightboxImg.src = src;
    lightboxImg.alt = alt || "Image agrandie";

    lightbox.classList.add("active");
    lightbox.setAttribute("aria-hidden", "false");
    lightboxInner.scrollTop = 0;

    // Empêche le scroll derrière
    document.documentElement.style.overflow = "hidden";
    document.body.style.overflow = "hidden";
  }

  function closeLightbox() {
    lightbox.classList.remove("active");
    lightbox.setAttribute("aria-hidden", "true");
    document.documentElement.style.overflow = "";
    document.body.style.overflow = "";
  }

  // Ouvrir au clic
  cards.forEach((img) => {
    img.addEventListener("click", () => openLightbox(img.src, img.alt));
  });

  // Fermer
  closeBtn.addEventListener("click", closeLightbox);

  // Click sur le fond (en dehors de la box) => ferme
  lightbox.addEventListener("click", (e) => {
    if (!lightboxInner.contains(e.target)) closeLightbox();
  });

  // ESC => ferme
  window.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && lightbox.classList.contains("active")) closeLightbox();
  });






  // ===== Swipe down to close (mobile) =====
let startY = 0;
let startX = 0;
let dragging = false;

const SWIPE_CLOSE_PX = 90;   // distance minimale pour fermer
const HORIZONTAL_TOL = 35;   // tolérance si ça part trop sur le côté

lightboxInner.addEventListener("touchstart", (e) => {
  if (!lightbox.classList.contains("active")) return;
  if (lightboxInner.scrollTop !== 0) return; // ✅ on ne ferme que si on est tout en haut

  const t = e.touches[0];
  startY = t.clientY;
  startX = t.clientX;
  dragging = true;
}, { passive: true });

lightboxInner.addEventListener("touchmove", (e) => {
  if (!dragging) return;

  const t = e.touches[0];
  const dy = t.clientY - startY;
  const dx = Math.abs(t.clientX - startX);

  // si l'utilisateur glisse trop à l'horizontal, on ignore
  if (dx > HORIZONTAL_TOL) {
    dragging = false;
    return;
  }

  // si on glisse vers le haut, on ignore
  if (dy < 0) {
    dragging = false;
    return;
  }

  // (Optionnel) petit feedback visuel pendant le drag
  lightboxInner.style.transform = `translateY(${Math.min(dy, 120)}px)`;
  lightboxInner.style.transition = "none";
}, { passive: true });

lightboxInner.addEventListener("touchend", () => {
  if (!dragging) return;
  dragging = false;

  // on récupère la translation appliquée
  const match = (lightboxInner.style.transform || "").match(/translateY\(([-\d.]+)px\)/);
  const dragged = match ? Number(match[1]) : 0;

  // reset visuel
  lightboxInner.style.transition = "transform .18s ease";
  lightboxInner.style.transform = "translateY(0px)";

  // si assez tiré vers le bas => ferme
  if (dragged >= SWIPE_CLOSE_PX) {
    closeLightbox();
  }
}, { passive: true });


  </script>
</body>
</html>
